---
title: Web
author: Rosie Yang
date: 2022-05-02
category: cs
layout: post
---

## OAuth
> Open Authorization

<span style="background-color:#fff5b1">타사 애플리케이션 계정 정보를 공유해 비밀번호 없이 토큰으로 접근권한을 위임하는 개방형 표준</span> 입니다. 만약 사용자가 구글 계정으로 로그인을 하게 되면 로그인 정보를 가지고 계정과 연결된 구글의 API를 가지고 Google Calendar와 같은 정보를 가지고 와서 사용할 수 있습니다.  

**인증과 인가**  
<span style="background-color:#fff5b1">Authentication 인증</span>은 접근 자격이 있는지 ```신원을 검증```하는 단계이고,  
<span style="background-color:#fff5b1">Authorization 인가</span>는 특정 자원에 접근할 ```권한을 부여```하는 것을 말합니다. 인가가 완료되면 access token이 클라이언트에 부여됩니다.  
<span style="background-color:#DCFFE4">OAuth와 로그인은 분리해서 생각해야 한다구?</span>  
OAuth를 이용한 인증은 허가의 의미도 포함하고 있으며, 제3자가 사용자의 권한으로 접근하는 것을 허용해주는 방식입니다. 따라서 그 서비스에 직접 로그인한 사용자와 달리 '방문증'을 가지고 있는 것이라고 생각하면 이해하기 쉽습니다. 그래서 우리는 흔히 일반적으로 회원가입 후 OAuth 인증을하는 방식으로 계정을 연동하는 것을 볼 수 있습니다.  
<span style="background-color:#DCFFE4">OpenID도 있는데 어떻게 다른걸까?</span>  
OpenID의 주요 목적은 인증(Authentication)이지만, OAuth의 주요 목적은 허가(Authorization)이다. OAuth도 인증과정이 있지만 근본 목적은 API를 호출할 수 있는 권한이 있는 사용자인지를 확인하는 것입니다.  

**OAuth와 OAuth 2.0**  
OAuth 2.0은 기능적으로도 규모적으로 확장된 형태로 다양한 인증방식을 제공합니다. OAuth 2.0은 OAuth과 호환되지 않지만 인증절차가 간단합니다. access token도 기존에는 계속 사용이 가능했으나, 2.0이 되면서 보안 강화를 위해 ```Life-time```을 설정해두고 있습니다.  
별도의 암호화가 필요없고 HTTPS를 사용하고 HMAC를 사용하지 않습니다.  
<span style="background-color:#fff5b1">OAuth와 OAuth 2.0 작동방식 비교</span>  
사용자를 인증을 하는 과정을 ```OAuth Dance```라고 합니다.  
OAuth의 작동방식  
<span style="background-color:#FFE6E6">Resource Owner(User) - Client(App) - Resource Server - Authorization Server</span>  
1. 사용자가 권한 요청 및 동의를 받아 ```authrization code```를 획득합니다.
2. ```authrization code```를 가지고 ```access token```을 요청합니다.
3. ```access token```을 가지고 구글 계정에 대한 구글 API를 사용합니다.   

OAuth 2.0의 작동방식

**토큰**
+ 요청 토큰 : 소비자가 사용자에게 접근권한을 인증받기 위해 필요한 정보가 담겨있음
+ 접근 토큰 : 인증 후에 사용자가 서비스 제공자가 아닌 소비자를 통해 보호 자원에 접근하기 위한 키 값
+ Access Token : 만료시간이 있고 끝나면 다시 요청해야 해야하는 토큰
+ Refresh Token : 만료되면 아예 처음부터 진행해야 해야하는 토큰

<hr/>  
+ [OAuth와 춤을](https://d2.naver.com/helloworld/24942)

